{"ast":null,"code":"import axios from \"axios\";\nimport { setAlert } from \"./Alert\";\nconst NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nconst oldURL = \"http://localhost:5001/\";\nexport const createPost = (inputTitle, inputDesc) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const data = {\n      title: inputTitle,\n      description: inputDesc\n    };\n    const body = JSON.stringify(data);\n    const postUrl = `${NEW}api/post/add`;\n    const res = await axios.post(postUrl, body, config);\n    dispatch({\n      type: \"ADD_POST\",\n      payload: res.data.data[0].data\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const loadCurPosts = () => async dispatch => {\n  try {\n    const res = await axios.get(`${NEW}api/post/myposts`);\n    dispatch({\n      type: \"LOAD_CUR_USER_POSTS\",\n      payload: res.data.data[0].data\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const loadOtherPosts = () => async dispatch => {\n  try {\n    const res = await axios.get(`${NEW}api/post/allPosts`);\n    dispatch({\n      type: \"LOAD_OTHER_POSTS\",\n      payload: res.data.data[0].msg\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const addComment = (postId, commentContent) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const data = {\n      description: commentContent\n    };\n    const body = JSON.stringify(data);\n    const res = await axios.put(`${NEW}api/post/${postId}/comment`, body, config);\n\n    if (res) {\n      dispatch({\n        type: \"ADD_COMMENT\",\n        payload: {\n          description: commentContent,\n          postId: postId\n        }\n      });\n      dispatch(setAlert(\"Comment Successfully adaded.\", \"success\"));\n    }\n  } catch (error) {\n    console.log(error.message);\n    dispatch(setAlert(\"Error Occured during Comment.Please try again later\", \"danger\"));\n  }\n};\nexport const likePost = postId => async dispatch => {\n  try {\n    const res = await axios.put(`${NEW}api/post/${postId}/like`);\n    dispatch(setAlert(\"Post Successfully Liked.\", \"success\"));\n  } catch (error) {\n    dispatch(setAlert(\"Sorry there exists an error within the system during post like. Please try again later\", \"danger\"));\n  }\n};\nexport const deletePost = postId => async dispatch => {\n  try {\n    console.log(\"deletePost Action called\");\n    console.log(postId);\n    const res = await axios.delete(`${NEW}api/post/${postId}`);\n\n    if (res.status === 200) {\n      dispatch({\n        type: \"REMOVE_POST\",\n        payload: postId\n      });\n      dispatch(setAlert(\"Post Successfully Deleted.\", \"success\"));\n    } else {\n      dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\", \"danger\"));\n    }\n  } catch (error) {\n    dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\", \"danger\"));\n  }\n};","map":{"version":3,"names":["axios","setAlert","NEW_URL","oldURL","createPost","inputTitle","inputDesc","dispatch","config","headers","data","title","description","body","JSON","stringify","postUrl","NEW","res","post","type","payload","error","loadCurPosts","get","loadOtherPosts","msg","addComment","postId","commentContent","put","console","log","message","likePost","deletePost","delete","status"],"sources":["/home/lot/REACT_JS_PROJECTS/weconnectclient/src/Actions/Post.js"],"sourcesContent":["import axios from \"axios\";\nimport { setAlert } from \"./Alert\";\nconst NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nconst oldURL = \"http://localhost:5001/\";\nexport const createPost = (inputTitle, inputDesc) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { title: inputTitle, description: inputDesc };\n    const body = JSON.stringify(data);\n    const postUrl = `${NEW}api/post/add`;\n    const res = await axios.post(postUrl, body, config);\n    dispatch({\n      type: \"ADD_POST\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadCurPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${NEW}api/post/myposts`);\n\n    dispatch({\n      type: \"LOAD_CUR_USER_POSTS\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadOtherPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${NEW}api/post/allPosts`);\n\n    dispatch({\n      type: \"LOAD_OTHER_POSTS\",\n      payload: res.data.data[0].msg,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\nexport const addComment=(postId,commentContent)=>async (dispatch)=>{\ntry{\nconst config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { description: commentContent};\n    const body = JSON.stringify(data);\n    const res = await axios.put(`${NEW}api/post/${postId}/comment`,body,config);\n    if(res){\n        dispatch({\n            type: \"ADD_COMMENT\",\n            payload:{description:commentContent,postId:postId}\n        })\n      dispatch(setAlert(\"Comment Successfully adaded.\",\"success\"));\n    }\n}\ncatch(error){\n  console.log(error.message)\n  dispatch(setAlert(\"Error Occured during Comment.Please try again later\",\"danger\"));\n}\n}\nexport const likePost = (postId) => async (dispatch) => {\n  try {\n    const res = await axios.put(\n      `${NEW}api/post/${postId}/like`\n    );\n    dispatch(setAlert(\"Post Successfully Liked.\", \"success\"));\n  } catch (error) {\n    dispatch(\n      setAlert(\n        \"Sorry there exists an error within the system during post like. Please try again later\",\n        \"danger\"\n      )\n    );\n  }\n};\nexport const deletePost = (postId) => async (dispatch) => {\n    try {\n        console.log(\"deletePost Action called\");\n        console.log(postId);\n        const res = await axios.delete(\n        `${NEW}api/post/${postId}`\n        );\n        if(res.status === 200){\n            dispatch({\n                type: \"REMOVE_POST\",\n                payload: postId,\n            })\n            dispatch(setAlert(\"Post Successfully Deleted.\", \"success\"));\n        }\n        else{\n            dispatch(\n            setAlert(\n                \"Sorry there exists an error within the system during post deletion. Please try again later\",\n                \"danger\"\n            )\n            );\n        }\n    } catch (error) {\n        dispatch(\n        setAlert(\n            \"Sorry there exists an error within the system during post deletion. Please try again later\",\n            \"danger\"\n        )\n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}