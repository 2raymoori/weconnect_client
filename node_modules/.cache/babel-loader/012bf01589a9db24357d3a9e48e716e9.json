{"ast":null,"code":"import _regeneratorRuntime from\"/home/lot/REACT_JS_PROJECTS/weconnectclient/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lot/REACT_JS_PROJECTS/weconnectclient/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{setAlert}from\"./Alert\";// const NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nvar NEW_URL=\"https://weconnect-production.up.railway.app/\";var oldURL=\"http://localhost:5001/\";export var createPost=function createPost(inputTitle,inputDesc){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var config,data,body,postUrl,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};data={title:inputTitle,description:inputDesc};body=JSON.stringify(data);postUrl=\"\".concat(NEW_URL,\"api/post/add\");_context.next=7;return axios.post(postUrl,body,config);case 7:res=_context.sent;dispatch({type:\"ADD_POST\",payload:res.data.data[0].data});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var loadCurPosts=function loadCurPosts(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(NEW_URL,\"api/post/myposts\"));case 3:res=_context2.sent;dispatch({type:\"LOAD_CUR_USER_POSTS\",payload:res.data.data[0].data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var loadOtherPosts=function loadOtherPosts(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"\".concat(NEW_URL,\"api/post/allPosts\"));case 3:res=_context3.sent;dispatch({type:\"LOAD_OTHER_POSTS\",payload:res.data.data[0].msg});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var addComment=function addComment(postId,commentContent){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var config,data,body,res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};data={description:commentContent};body=JSON.stringify(data);_context4.next=6;return axios.put(\"\".concat(NEW_URL,\"api/post/\").concat(postId,\"/comment\"),body,config);case 6:res=_context4.sent;if(res){dispatch({type:\"ADD_COMMENT\",payload:{description:commentContent,postId:postId}});dispatch(setAlert(\"Comment Successfully adaded.\",\"success\"));}_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0.message);dispatch(setAlert(\"Error Occured during Comment.Please try again later\",\"danger\"));case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var likePost=function likePost(postId){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch){var res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put(\"\".concat(NEW_URL,\"api/post/\").concat(postId,\"/like\"));case 3:res=_context5.sent;dispatch(setAlert(\"Post Successfully Liked.\",\"success\"));_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch(setAlert(\"Sorry there exists an error within the system during post like. Please try again later\",\"danger\"));case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var deletePost=function deletePost(postId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(dispatch){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;console.log(\"deletePost Action called\");console.log(postId);_context6.next=5;return axios.delete(\"\".concat(NEW_URL,\"api/post/\").concat(postId));case 5:res=_context6.sent;if(res.status===200){dispatch({type:\"REMOVE_POST\",payload:postId});dispatch(setAlert(\"Post Successfully Deleted.\",\"success\"));}else{dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\",\"danger\"));}_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](0);dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\",\"danger\"));case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[0,9]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","setAlert","NEW_URL","oldURL","createPost","inputTitle","inputDesc","dispatch","config","headers","data","title","description","body","JSON","stringify","postUrl","post","res","type","payload","loadCurPosts","get","loadOtherPosts","msg","addComment","postId","commentContent","put","console","log","message","likePost","deletePost","delete","status"],"sources":["/home/lot/REACT_JS_PROJECTS/weconnectclient/src/Actions/Post.js"],"sourcesContent":["import axios from \"axios\";\nimport { setAlert } from \"./Alert\";\n// const NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nconst NEW_URL = \"https://weconnect-production.up.railway.app/\";\nconst oldURL = \"http://localhost:5001/\";\nexport const createPost = (inputTitle, inputDesc) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { title: inputTitle, description: inputDesc };\n    const body = JSON.stringify(data);\n    const postUrl = `${NEW_URL}api/post/add`;\n    const res = await axios.post(postUrl, body, config);\n    dispatch({\n      type: \"ADD_POST\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadCurPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${NEW_URL}api/post/myposts`);\n\n    dispatch({\n      type: \"LOAD_CUR_USER_POSTS\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadOtherPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${NEW_URL}api/post/allPosts`);\n\n    dispatch({\n      type: \"LOAD_OTHER_POSTS\",\n      payload: res.data.data[0].msg,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\nexport const addComment = (postId, commentContent) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { description: commentContent };\n    const body = JSON.stringify(data);\n    const res = await axios.put(\n      `${NEW_URL}api/post/${postId}/comment`,\n      body,\n      config\n    );\n    if (res) {\n      dispatch({\n        type: \"ADD_COMMENT\",\n        payload: { description: commentContent, postId: postId },\n      });\n      dispatch(setAlert(\"Comment Successfully adaded.\", \"success\"));\n    }\n  } catch (error) {\n    console.log(error.message);\n    dispatch(\n      setAlert(\"Error Occured during Comment.Please try again later\", \"danger\")\n    );\n  }\n};\nexport const likePost = (postId) => async (dispatch) => {\n  try {\n    const res = await axios.put(`${NEW_URL}api/post/${postId}/like`);\n    dispatch(setAlert(\"Post Successfully Liked.\", \"success\"));\n  } catch (error) {\n    dispatch(\n      setAlert(\n        \"Sorry there exists an error within the system during post like. Please try again later\",\n        \"danger\"\n      )\n    );\n  }\n};\nexport const deletePost = (postId) => async (dispatch) => {\n  try {\n    console.log(\"deletePost Action called\");\n    console.log(postId);\n    const res = await axios.delete(`${NEW_URL}api/post/${postId}`);\n    if (res.status === 200) {\n      dispatch({\n        type: \"REMOVE_POST\",\n        payload: postId,\n      });\n      dispatch(setAlert(\"Post Successfully Deleted.\", \"success\"));\n    } else {\n      dispatch(\n        setAlert(\n          \"Sorry there exists an error within the system during post deletion. Please try again later\",\n          \"danger\"\n        )\n      );\n    }\n  } catch (error) {\n    dispatch(\n      setAlert(\n        \"Sorry there exists an error within the system during post deletion. Please try again later\",\n        \"danger\"\n      )\n    );\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}