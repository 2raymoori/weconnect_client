{"ast":null,"code":"import axios from \"axios\";\nimport { setAlert } from \"./Alert\";\nconst NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nconst oldURL = \"http://localhost:5001/\";\nexport const createPost = (inputTitle, inputDesc) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const data = {\n      title: inputTitle,\n      description: inputDesc\n    };\n    const body = JSON.stringify(data);\n    const postUrl = `${NEW_URL}api/post/add`;\n    const res = await axios.post(postUrl, body, config);\n    dispatch({\n      type: \"ADD_POST\",\n      payload: res.data.data[0].data\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const loadCurPosts = () => async dispatch => {\n  try {\n    const res = await axios.get(`${NEW_URL}api/post/myposts`);\n    dispatch({\n      type: \"LOAD_CUR_USER_POSTS\",\n      payload: res.data.data[0].data\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const loadOtherPosts = () => async dispatch => {\n  try {\n    const res = await axios.get(`${oldURL}api/post/allPosts`);\n    dispatch({\n      type: \"LOAD_OTHER_POSTS\",\n      payload: res.data.data[0].msg\n    });\n  } catch (error) {\n    dispatch(setAlert(\"Error Occured in the Post creation. Please try again later\"));\n  }\n};\nexport const addComment = (postId, commentContent) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const data = {\n      description: commentContent\n    };\n    const body = JSON.stringify(data);\n    const res = await axios.put(`${oldURL}api/post/${postId}/comment`, body, config);\n\n    if (res) {\n      dispatch({\n        type: \"ADD_COMMENT\",\n        payload: {\n          description: commentContent,\n          postId: postId\n        }\n      });\n      dispatch(setAlert(\"Comment Successfully adaded.\", \"success\"));\n    }\n  } catch (error) {\n    console.log(error.message);\n    dispatch(setAlert(\"Error Occured during Comment.Please try again later\", \"danger\"));\n  }\n};\nexport const likePost = postId => async dispatch => {\n  try {\n    const res = await axios.put(`${oldURL}api/post/${postId}/like`);\n    dispatch(setAlert(\"Post Successfully Liked.\", \"success\"));\n  } catch (error) {\n    dispatch(setAlert(\"Sorry there exists an error within the system during post like. Please try again later\", \"danger\"));\n  }\n};\nexport const deletePost = postId => async dispatch => {\n  try {\n    console.log(\"deletePost Action called\");\n    console.log(postId);\n    const res = await axios.delete(`${oldURL}api/post/${postId}`);\n\n    if (res.status === 200) {\n      dispatch({\n        type: \"REMOVE_POST\",\n        payload: postId\n      });\n      dispatch(setAlert(\"Post Successfully Deleted.\", \"success\"));\n    } else {\n      dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\", \"danger\"));\n    }\n  } catch (error) {\n    dispatch(setAlert(\"Sorry there exists an error within the system during post deletion. Please try again later\", \"danger\"));\n  }\n};","map":{"version":3,"names":["axios","setAlert","NEW_URL","oldURL","createPost","inputTitle","inputDesc","dispatch","config","headers","data","title","description","body","JSON","stringify","postUrl","res","post","type","payload","error","loadCurPosts","get","loadOtherPosts","msg","addComment","postId","commentContent","put","console","log","message","likePost","deletePost","delete","status"],"sources":["/home/lot/REACT_JS_PROJECTS/weconnectclient/src/Actions/Post.js"],"sourcesContent":["import axios from \"axios\";\nimport { setAlert } from \"./Alert\";\nconst NEW_URL = \"https://weconnect-api-u9ml.onrender.com/\";\nconst oldURL = \"http://localhost:5001/\";\nexport const createPost = (inputTitle, inputDesc) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { title: inputTitle, description: inputDesc };\n    const body = JSON.stringify(data);\n    const postUrl = `${NEW_URL}api/post/add`;\n    const res = await axios.post(postUrl, body, config);\n    dispatch({\n      type: \"ADD_POST\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadCurPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${NEW_URL}api/post/myposts`);\n\n    dispatch({\n      type: \"LOAD_CUR_USER_POSTS\",\n      payload: res.data.data[0].data,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\n\nexport const loadOtherPosts = () => async (dispatch) => {\n  try {\n    const res = await axios.get(`${oldURL}api/post/allPosts`);\n\n    dispatch({\n      type: \"LOAD_OTHER_POSTS\",\n      payload: res.data.data[0].msg,\n    });\n  } catch (error) {\n    dispatch(\n      setAlert(\"Error Occured in the Post creation. Please try again later\")\n    );\n  }\n};\nexport const addComment = (postId, commentContent) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    const data = { description: commentContent };\n    const body = JSON.stringify(data);\n    const res = await axios.put(\n      `${oldURL}api/post/${postId}/comment`,\n      body,\n      config\n    );\n    if (res) {\n      dispatch({\n        type: \"ADD_COMMENT\",\n        payload: { description: commentContent, postId: postId },\n      });\n      dispatch(setAlert(\"Comment Successfully adaded.\", \"success\"));\n    }\n  } catch (error) {\n    console.log(error.message);\n    dispatch(\n      setAlert(\"Error Occured during Comment.Please try again later\", \"danger\")\n    );\n  }\n};\nexport const likePost = (postId) => async (dispatch) => {\n  try {\n    const res = await axios.put(`${oldURL}api/post/${postId}/like`);\n    dispatch(setAlert(\"Post Successfully Liked.\", \"success\"));\n  } catch (error) {\n    dispatch(\n      setAlert(\n        \"Sorry there exists an error within the system during post like. Please try again later\",\n        \"danger\"\n      )\n    );\n  }\n};\nexport const deletePost = (postId) => async (dispatch) => {\n  try {\n    console.log(\"deletePost Action called\");\n    console.log(postId);\n    const res = await axios.delete(`${oldURL}api/post/${postId}`);\n    if (res.status === 200) {\n      dispatch({\n        type: \"REMOVE_POST\",\n        payload: postId,\n      });\n      dispatch(setAlert(\"Post Successfully Deleted.\", \"success\"));\n    } else {\n      dispatch(\n        setAlert(\n          \"Sorry there exists an error within the system during post deletion. Please try again later\",\n          \"danger\"\n        )\n      );\n    }\n  } catch (error) {\n    dispatch(\n      setAlert(\n        \"Sorry there exists an error within the system during post deletion. Please try again later\",\n        \"danger\"\n      )\n    );\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}